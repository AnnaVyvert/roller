<div class="head p-3">
  <button type="button" class="btn btn-outline-secondary back" routerLink="/">
    <i class="fa-solid fa-backward"></i>
  </button>
  Редактор датасетов
  <!-- <button type="button" class="btn btn-outline-secondary manual">
    <i class="fa-sharp fa-solid fa-circle-question"></i>
  </button> -->
</div>

<table>
  <thead>
    <tr>
      <th class='td-left'>id</th>
      <th class='td-left' colspan='2'>operations</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let jsonStore of store; let i = index">
      <td class='td-left'>датасет [{{ i }}]</td>
      <td><button class="btn btn-outline-secondary" (click)="selectJsonStore(i)" [disabled]="jsonStoreSelected === i">{{jsonStoreSelected === i? ' ✓': '✎'}}</button></td>
      <td><button class="btn btn-outline-secondary" (click)="removeJsonStore(i)" [disabled]="store.length < 2">-</button></td>
    </tr>
    <tr>
      <td colspan='3'><button class="btn btn-outline-secondary" (click)="addJsonStore()">+</button></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th class='td-left' *ngFor="let el of jsonScheme.types | keyvalue" [class.non-display]='!jsonScheme.show.includes(el.key)'>{{ el.key }}</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let json of jsonStore">
      <td class='td-left' *ngFor="let el of json | keyvalue" [class.non-display]='!jsonScheme.show.includes(el.key)'>{{ el.value }}</td>
      <td><button class="btn btn-outline-secondary" (click)="removeField(json.id)">-</button></td>
    </tr>
    <tr>
      <ng-container [formGroup]="addFieldForm">
        <td *ngFor="let item of jsonScheme.types | keyvalue" [class.non-display]='item.key === "id"'>
          <input class='form-control' type="text" [formControlName]="item.key" />
        </td>
        <td><button class="btn btn-outline-secondary" #fieldSubmit (click)="addField()">+</button></td>
      </ng-container>
    </tr>
  </tbody>
</table>

<textarea class='form-control' readonly cols="30" rows="10">{{
  jsonStoreStr
}}</textarea>

<div class="input-group mb-3">
  <div class="custom-file">
    <input type="file" class="custom-file-input" id="inputGroupFile02" (change)="handleFileInput($event)" accept=".json">
    <label class="custom-file-label">Choose file</label>
  </div>
  <div class="input-group-append" style='cursor: pointer;'>
    <span class="input-group-text" (click)="exportJson()">Export</span>
  </div>
</div>